apply plugin: 'java'
apply plugin: 'checkstyle'
apply plugin: 'findbugs'

println 'project.name: ' + project.name

//println project(':build-tool').projectDir.absolutePath + '/config/checkstyle/checkstyle.xml'

repositories {
    jcenter()
}


task jarTest(type: Jar) {
    from sourceSets.test.output
    classifier = 'test'
}


configurations {
    testLib
}


artifacts {
    testLib jarTest
}


Closure compilerOptions = {
    options.compilerArgs << '-Xlint:unchecked' << '-Xlint:deprecation'
}


compileJava compilerOptions
compileTestJava compilerOptions


checkstyle {
    toolVersion = "6.19"
    ignoreFailures = false
    //configFile = project(':build-tool').checkstyle.configFile //+ 'checkstyle/checkstyle.xml'
    configFile = '../build-tool/config/checkstyle/checkstyle.xml' as File
}


tasks.withType(FindBugs) {
    reports {
        xml.enabled false
        html.enabled true
    }
}


allprojects {
    task hello1 << { task -> println "I'm allprojects $task.project.name" }

    println project.name + ' allprojects'

    apply plugin: 'checkstyle'
    apply plugin: 'findbugs'

}

subprojects {

    println project.name + ' subprojects'

    task hello2 << { task -> println "I'm subprojects $task.project.name" }
}